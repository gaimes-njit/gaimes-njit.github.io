To generate a structure that resembles the character "D" while meeting all the hard constraints, we can follow these steps:

1. Initialize the structure as an empty WxH grid.
2. Determine the dropping position and order for each block type to ensure stability and meet the constraints.
3. Use the ab_drop() function to place suitable blocks on the structure.

Based on the constraint 5.1 (stability), a b31 block must be placed on a solid base (b11 or b13 blocks) to prevent overhangs, blocks should be placed as low as possible to reduce the risk of collapsing, and the structure should not be separated.

Considering these constraints, the shape of the structure that resembles the character "D" can be computed as follows:

1. Place two b11 blocks side by side on layer 0 to form the base.
2. Drop a b31 block centered on top of the b11 blocks, spanning layer 1 and layer 2.
3. Drop a b31 block centered on top of the previous b31 block, spanning layer 3 and layer 4.
4. Drop a b31 block centered on top of the previous b31 block, spanning layer 5 and layer 6.
5. Drop a b31 block centered on top of the previous b31 block, spanning layer 7 and layer 8.
6. Drop a b13 block centered above the previous b31 block, spanning layer 9 to layer 11. This block will form the curved part of the character "D".
7. Drop a b11 block centered above the previous b13 block, at layer 12. This block will form the center part of the character "D".
8. Drop a b13 block centered on top of the previous b11 block, spanning layer 13 to layer 15. This block will form the straight part of the character "D".

Finally, use the ab_drop() function with the calculated dropping positions to generate the structure that resembles the character "D".

Note: The dropping positions and order mentioned here are based on an example and may need to be adjusted for different configurations of the character "D".